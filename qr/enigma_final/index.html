<!doctype html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Activitats – Tarragona</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;max-width:820px;margin:40px auto;padding:0 16px;line-height:1.5;color:#222}
    .card{background:#fff;border:1px solid #e6e6e6;border-radius:14px;padding:18px 18px;margin:14px 0;box-shadow:0 1px 10px rgba(0,0,0,.04)}
    h1{font-size:1.5rem;margin:0 0 10px}
    .muted{color:#666;font-size:.95rem}
    label{display:block;font-weight:600;margin:10px 0 6px}
    input[type="text"]{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #ccc;font-size:1rem}
    button{padding:10px 14px;border-radius:12px;border:0;background:#111;color:#fff;font-weight:700;cursor:pointer}
    button:disabled{opacity:.5;cursor:not-allowed}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .ok{color:#0a7a2f;font-weight:700}
    .bad{color:#b00020;font-weight:700}
  </style>
</head>
<body>

  <div class="card">
    <h1>Preguntes del llibre</h1>
    <p class="muted">
      Respon correctament per desbloquejar l’accés al diploma.
    </p>
  </div>

  <form id="quizForm" class="card" autocomplete="off">
    <div id="questions"></div>

    <div class="row" style="margin-top:14px;">
      <button id="checkBtn" type="submit">Comprovar respostes</button>
      <button id="resetBtn" type="button">Reiniciar</button>
    </div>

    <p id="msg" style="margin-top:12px;"></p>
  </form>

  <script>
    // 1) EDITA AQUÍ LES TEVES PREGUNTES I RESPOSTES
    // Comprovació "tolerant": ignora majúscules, accents i espais extra
    const QUIZ = [
      { id: "q1", label: "1) Com es diu el grup protagonista?", placeholder: "Escriu la resposta…", answer: "Sixmix" },
      { id: "q2", label: "2) A quina ciutat passa l’activitat?", placeholder: "Escriu la resposta…", answer: "Tarragona" },
      { id: "q3", label: "3) Paraula clau del tema principal (una paraula):", placeholder: "Escriu la resposta…", answer: "contaminació" }
    ];

    const form = document.getElementById("quizForm");
    const qWrap = document.getElementById("questions");
    const msg = document.getElementById("msg");
    const resetBtn = document.getElementById("resetBtn");

    function normalitza(s){
      return (s || "")
        .toString()
        .trim()
        .toLowerCase()
        .normalize("NFD").replace(/[\u0300-\u036f]/g,"") // treu accents
        .replace(/\s+/g," "); // col·lapsa espais
    }

    function renderitza(){
      qWrap.innerHTML = "";
      QUIZ.forEach(q => {
        const div = document.createElement("div");
        div.innerHTML = `
          <label for="${q.id}">${q.label}</label>
          <input id="${q.id}" name="${q.id}" type="text" placeholder="${q.placeholder}" />
        `;
        qWrap.appendChild(div);
      });
    }

    renderitza();

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      msg.textContent = "";

      let correctes = 0;
      const errors = [];

      QUIZ.forEach(q => {
        const val = document.getElementById(q.id).value;
        if (normalitza(val) === normalitza(q.answer)) {
          correctes++;
          document.getElementById(q.id).style.borderColor = "#ccc";
        } else {
          errors.push(q.id);
        }
      });

      if (correctes === QUIZ.length) {
        // Marca que has passat el qüestionari i redirigeix
        localStorage.setItem("sixmix_quiz_ok", "1");
        msg.className = "ok";
        msg.textContent = "✅ Perfecte! Accés desbloquejat…";
        setTimeout(() => {
          window.location.href = "./accés.html";
        }, 700);
      } else {
        msg.className = "bad";
        msg.textContent = `❌ Et falten ${QUIZ.length - correctes}. Revisa i torna-ho a provar.`;
        errors.forEach(id => document.getElementById(id).style.borderColor = "#b00020");
      }
    });

    resetBtn.addEventListener("click", () => {
      form.reset();
      msg.textContent = "";
      QUIZ.forEach(q => document.getElementById(q.id).style.borderColor = "#ccc");
      localStorage.removeItem("sixmix_quiz_ok");
    });
  </script>

</body>
</html>
